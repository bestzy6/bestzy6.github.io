<!doctype html><html lang=zh-Hans x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux文本处理三剑客：grep、sed和awk | Bestzy's Blog</title><link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://bestzy6.github.io/posts/grep-awk-sed/><meta name=author content="bestzy"><meta name=description content="Linux系统中的grep、sed和awk是三个强大的文本处理工具，它们各自具有独特的功能和应用场景。本文将详细介绍这三个命令的使用方法和常见应用场景。
"><meta name=keywords content="Linux"><meta name=generator content="Hugo 0.148.2"><meta property="og:url" content="https://bestzy6.github.io/posts/grep-awk-sed/"><meta property="og:site_name" content="Bestzy's Blog"><meta property="og:title" content="Linux文本处理三剑客：grep、sed和awk"><meta property="og:description" content="Linux系统中的grep、sed和awk是三个强大的文本处理工具，它们各自具有独特的功能和应用场景。本文将详细介绍这三个命令的使用方法和常见应用场景。"><meta property="og:locale" content="zh_Hans"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-17T22:19:28+08:00"><meta property="article:modified_time" content="2025-01-17T22:19:28+08:00"><meta property="article:tag" content="Linux"><meta property="og:image" content="https://i0.hdslb.com/bfs/article/7a084413bf52aa70ef30212b7914359b2099359.jpg@1e_1c.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i0.hdslb.com/bfs/article/7a084413bf52aa70ef30212b7914359b2099359.jpg@1e_1c.webp"><meta name=twitter:title content="Linux文本处理三剑客：grep、sed和awk"><meta name=twitter:description content="Linux系统中的grep、sed和awk是三个强大的文本处理工具，它们各自具有独特的功能和应用场景。本文将详细介绍这三个命令的使用方法和常见应用场景。"><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script><meta name=referrer content="no-referrer"></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title=翻转一下！><div class="h-10 rounded-full"><img src="https://avatars.githubusercontent.com/u/43753176?v=4" alt=Bestzy></div></div><div><a href=https://bestzy6.github.io/ class="text-lg font-semibold cursor-pointer">Bestzy</a><div class="text-base-content/60 text-sm">🚀先行其事，后臻其善，再求其优！</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><a class="group inline-flex items-center p-2 cursor-pointer" href=/search title=搜索><ion-icon name=search></ion-icon>搜索</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=归档><ion-icon name=archive></ion-icon>归档</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/categories title=所有分类><ion-icon name=grid></ion-icon>所有分类</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title=所有标签><ion-icon name=pricetags></ion-icon>所有标签</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/search title=搜索><ion-icon class=group-hover:text-primary-content name=search></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=归档><ion-icon name=archive></ion-icon>归档</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/categories title=所有分类><ion-icon name=grid></ion-icon>所有分类</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title=所有标签><ion-icon name=pricetags></ion-icon>所有标签</a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="Linux文本处理三剑客：grep、sed和awk"><meta itemprop=description content="Linux系统中的grep、sed和awk是三个强大的文本处理工具，它们各自具有独特的功能和应用场景。本文将详细介绍这三个命令的使用方法和常见应用场景。"><meta itemprop=datePublished content="2025-01-17T22:19:28+08:00"><meta itemprop=dateModified content="2025-01-17T22:19:28+08:00"><meta itemprop=wordCount content="2847"><meta itemprop=image content="https://i0.hdslb.com/bfs/article/7a084413bf52aa70ef30212b7914359b2099359.jpg@1e_1c.webp"><meta itemprop=keywords content="Linux"><header><h1 itemprop=headline>Linux文本处理三剑客：grep、sed和awk</h1><p class=text-sm><span data-format=luxon>2025-01-17T22:19:28+08:00</span>
| <span>6分钟阅读</span></p><div class="flex justify-between"><div class="flex items-center"><div class="avatar mr-1"><div class="w-8 rounded-full"><img class=my-0! src="https://avatars.githubusercontent.com/u/43753176?v=4" alt=bestzy></div></div><span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>bestzy</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=Linux%e6%96%87%e6%9c%ac%e5%a4%84%e7%90%86%e4%b8%89%e5%89%91%e5%ae%a2%ef%bc%9agrep%e3%80%81sed%e5%92%8cawk&amp;url=https://bestzy6.github.io/posts/grep-awk-sed/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://bestzy6.github.io/posts/grep-awk-sed/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img class="w-full z-30" src=https://i0.hdslb.com/bfs/article/7a084413bf52aa70ef30212b7914359b2099359.jpg@1e_1c.webp alt=Linux文本处理三剑客：grep、sed和awk><p>Linux系统中的grep、sed和awk是三个强大的文本处理工具，它们各自具有独特的功能和应用场景。本文将详细介绍这三个命令的使用方法和常见应用场景。</p><h2 id=grep---文本搜索利器>grep - 文本搜索利器</h2><p>grep(Global Regular Expression Print)命令用于在文件中搜索指定的文本模式。它是最基础也是最常用的文本搜索工具，默认是<strong>按行搜索</strong>的。</p><h3 id=基本语法>基本语法</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep <span style=color:#f92672>[</span>选项<span style=color:#f92672>]</span> 模式 文件名
</span></span></code></pre></div><h3 id=常用选项>常用选项</h3><table><thead><tr><th>选项</th><th>说明</th><th>示例</th><th>示例说明</th></tr></thead><tbody><tr><td><code>-i</code></td><td>忽略大小写</td><td><code>grep -i "Error" file.txt</code></td><td>忽略“Error”的大小写</td></tr><tr><td><code>-v</code></td><td>显示不匹配的行</td><td><code>grep -v "error" file.txt</code></td><td>显示不匹配“error”的行</td></tr><tr><td><code>-n</code></td><td>显示行号</td><td><code>grep -n "error" file.txt</code></td><td>显示匹配行及其行号，如 &ldquo;123:error occurred&rdquo;</td></tr><tr><td><code>-l</code></td><td>只显示<strong>包含</strong>匹配的文件名</td><td><code>grep -l "error" *.txt</code></td><td>只列出包含 &ldquo;error&rdquo; 的文件名，如 &ldquo;log.txt&rdquo;</td></tr><tr><td><code>-L</code></td><td>只显示<strong>不包含</strong>匹配的文件名</td><td><code>grep -L "error" *.txt</code></td><td>只列出不包含 &ldquo;error&rdquo; 的文件名，如 &ldquo;success.txt&rdquo;</td></tr><tr><td><code>-c</code></td><td>只显示匹配行的数量</td><td><code>grep -c "error" file.txt</code></td><td>显示文件中包含 &ldquo;error&rdquo; 的行数，如 &ldquo;5&rdquo;</td></tr><tr><td><code>-w</code></td><td>只匹配整个单词</td><td><code>grep -w "error" file.txt</code></td><td>匹配 &ldquo;error&rdquo; 但不匹配 &ldquo;errors&rdquo; 或 &ldquo;errorlog&rdquo;</td></tr><tr><td><code>-x</code></td><td>只匹配整行（<strong>精确匹配整行</strong>）</td><td><code>grep -x "error" file.txt</code></td><td>只匹配整行恰好是 &ldquo;error&rdquo; 的行，不匹配 &ldquo;error log&rdquo;</td></tr><tr><td><code>-r</code></td><td>递归搜索目录（<strong>不跟随</strong>符号链接）</td><td><code>grep -r "error" /path</code></td><td>在 /path 目录下递归搜索，不包含符号链接指向的目录</td></tr><tr><td><code>-R</code></td><td>递归搜索（<strong>跟随</strong>符号链接）</td><td><code>grep -R "error" /path</code></td><td>在 /path 目录下递归搜索，包含符号链接指向的目录</td></tr><tr><td><code>-A n</code></td><td>显示匹配行及后 n 行</td><td><code>grep -A 2 "error" file.txt</code></td><td>显示包含 &ldquo;error&rdquo; 的行及其后 2 行</td></tr><tr><td><code>-B n</code></td><td>显示匹配行及前 n 行</td><td><code>grep -B 2 "error" file.txt</code></td><td>显示包含 &ldquo;error&rdquo; 的行及其前 2 行</td></tr><tr><td><code>-C n</code></td><td>显示匹配行及前后各 n 行</td><td><code>grep -C 2 "error" file.txt</code></td><td>显示包含 &ldquo;error&rdquo; 的行及其前后各 2 行</td></tr></tbody></table><p>grep 可以组合使用多个选项，例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 忽略大小写 + 显示行号</span>
</span></span><span style=display:flex><span>grep -in <span style=color:#e6db74>&#34;error&#34;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 递归搜索 + 显示行号 + 只显示文件名</span>
</span></span><span style=display:flex><span>grep -rln <span style=color:#e6db74>&#34;error&#34;</span> /path/to/dir
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 显示行号 + 匹配整词 + 显示上下文</span>
</span></span><span style=display:flex><span>grep -nw -C <span style=color:#ae81ff>2</span> <span style=color:#e6db74>&#34;error&#34;</span> file.txt
</span></span></code></pre></div><h3 id=使用示例>使用示例</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 在文件中搜索包含&#34;error&#34;的行</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;error&#34;</span> log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 忽略大小写搜索</span>
</span></span><span style=display:flex><span>grep -i <span style=color:#e6db74>&#34;ERROR&#34;</span> log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 显示行号</span>
</span></span><span style=display:flex><span>grep -n <span style=color:#e6db74>&#34;error&#34;</span> log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 递归搜索目录</span>
</span></span><span style=display:flex><span>grep -r <span style=color:#e6db74>&#34;TODO&#34;</span> ./src/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用正则表达式</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;^[0-9]&#34;</span> data.txt
</span></span></code></pre></div><h2 id=sed---流编辑器>sed - 流编辑器</h2><p>sed(Stream Editor)是一个强大的文本流编辑器，可以对文本进行替换、删除、插入等操作。</p><h3 id=基本语法-1>基本语法</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#f92672>[</span>选项<span style=color:#f92672>]</span> <span style=color:#e6db74>&#39;[地址]命令[参数]&#39;</span> 文件名
</span></span></code></pre></div><ul><li><strong>地址</strong>：指定要操作的行（可选），可以是<ul><li>行号（如 <code>1</code> 表示第1行，<code>$</code> 表示最后一行）</li><li>正则表达式（如 <code>/pattern/</code> 表示匹配 <code>pattern</code> 的行）</li><li>行范围（如 <code>1,5</code> 表示第1到第5行）</li></ul></li><li><strong>命令</strong>：指定要执行的操作（必选），常用命令有s、d、p等。</li><li><strong>参数</strong>：命令的附加参数（可选），用于进一步控制命令的行为，比如：<ul><li><code>g</code>：全局替换（用于 <code>s</code> 命令）。</li><li><code>2</code>：只替换第2个匹配（用于 <code>s</code> 命令）。</li><li><code>i</code>：忽略大小写（用于正则表达式）。</li></ul></li></ul><h3 id=常用选项-1>常用选项</h3><ul><li><code>-i</code>: 直接修改文件内容（慎用，会覆盖原文件）。</li><li><code>-n</code>: 禁止自动输出，只打印被处理的行（通常与 <code>p</code> 命令一起使用）。</li><li><code>-e</code>: 执行多个命令</li><li><code>-f</code>: 从文件读取命令</li></ul><h3 id=常用命令>常用命令</h3><table><thead><tr><th>命令</th><th>解释</th><th>说明</th><th>是否需要分隔符</th><th>常见使用方式</th><th>常见使用方式解释</th></tr></thead><tbody><tr><td>s</td><td>substitute</td><td>替换</td><td><strong>是</strong></td><td>sed &rsquo;s/old/new/&rsquo; 文件</td><td><code>s</code> 后面的 <code>/old/new/</code> 是<strong>替换命令的具体内容</strong>，它定义了替换操作的细节，<code>s</code>命令的完整格式是<code>s&lt;分隔符>查找模式&lt;分隔符>替换内容&lt;分隔符></code>。<code>s/old/new/</code>中地址是<strong>隐式</strong>的，表示<strong>所有行</strong>。</td></tr><tr><td>d</td><td>delete</td><td>删除</td><td>否</td><td>sed &lsquo;/pattern/d&rsquo; 文件</td><td><code>/pattern/</code>为地址部分，是 <code>sed</code> 中的<strong>地址匹配语法</strong>，pattern是一个正则表达式；命令为<code>d</code>。</td></tr><tr><td>p</td><td>print</td><td>打印</td><td>否</td><td>sed -n &lsquo;/pattern/p&rsquo; 文件</td><td><code>/pattern/</code>为地址部分，是 <code>sed</code> 中的<strong>地址匹配语法</strong>，pattern是一个正则表达式；命令为<code>p</code>。</td></tr><tr><td>i</td><td>insert</td><td>在匹配行之前插入内容</td><td>否</td><td>sed &lsquo;/pattern/i 新内容&rsquo; 文件</td><td><code>/pattern/</code>为地址部分，是 <code>sed</code> 中的<strong>地址匹配语法</strong>，pattern是一个正则表达式；命令为<code>i</code>。</td></tr><tr><td>a</td><td>append</td><td>在匹配行之后追加内容</td><td>否</td><td>sed &lsquo;/pattern/a 新内容&rsquo; 文件</td><td><code>/pattern/</code>为地址部分，是 <code>sed</code> 中的<strong>地址匹配语法</strong>，pattern是一个正则表达式；命令为<code>a</code>。</td></tr><tr><td>c</td><td>change</td><td>用新内容替换整行</td><td>否</td><td>sed &lsquo;/pattern/c 新内容&rsquo; 文件</td><td><code>/pattern/</code>为地址部分，是 <code>sed</code> 中的<strong>地址匹配语法</strong>，pattern是一个正则表达式；命令为<code>c</code>。</td></tr></tbody></table><p>注意，s命令的<strong>默认分隔符</strong>是 <code>/</code>，但可以使用其他符号（如 <code>|</code>、<code>:</code> 等）作为分隔符，当<code>/</code>有其他作用时，如表示文件路径，可以使用自定义分隔符。示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 使用默认分隔符</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/old/new/&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用自定义分隔符</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s|old|new|&#39;</span> file.txt
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s:old🆕&#39;</span> file.txt
</span></span></code></pre></div><h3 id=使用示例-1>使用示例</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 替换文本</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/old/new/&#39;</span> file.txt
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/old/new/g&#39;</span> file.txt  <span style=color:#75715e># 全局替换</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除空行</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;/^$/d&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 打印特定行</span>
</span></span><span style=display:flex><span>sed -n <span style=color:#e6db74>&#39;1,5p&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 直接修改文件</span>
</span></span><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/old/new/g&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 多个命令组合</span>
</span></span><span style=display:flex><span>sed -e <span style=color:#e6db74>&#39;s/old/new/&#39;</span> -e <span style=color:#e6db74>&#39;s/foo/bar/&#39;</span> file.txt
</span></span></code></pre></div><h2 id=awk---文本处理编程语言>awk - 文本处理编程语言</h2><p>awk是一个强大的<strong>文本处理编程语言</strong>，特别适合处理格式化的文本数据。</p><h3 id=基本语法-2>基本语法</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#f92672>[</span>选项<span style=color:#f92672>]</span> <span style=color:#e6db74>&#39;模式 {动作}&#39;</span> 文件名
</span></span></code></pre></div><ul><li><strong>模式</strong> pattern：决定何时执行action</li><li><strong>动作</strong> action：在pattern匹配时要执行的操作</li></ul><h3 id=常用选项-2>常用选项</h3><table><thead><tr><th>选项</th><th>说明</th><th>示例</th><th>示例说明</th></tr></thead><tbody><tr><td><code>-F</code></td><td>指定字段分隔符</td><td><code>awk -F: '{ print $1 }' /etc/passwd</code></td><td>使用冒号作为分隔符</td></tr><tr><td><code>-f</code></td><td>从文件读取 awk 脚本</td><td><code>awk -f script.awk data.txt</code></td><td>从 script.awk 读取脚本</td></tr><tr><td><code>-v</code></td><td>设置变量</td><td><code>awk -v name="John" '{ print name }' file.txt</code></td><td>设置变量 name 的值为 &ldquo;John&rdquo;</td></tr></tbody></table><h3 id=常用内置变量>常用内置变量</h3><p>内置变量让我们能更方便地处理文本和控制程序行为</p><table><thead><tr><th>变量名称</th><th>说明</th><th>使用示例</th><th>使用示例说明</th></tr></thead><tbody><tr><td>$0</td><td>整行内容</td><td><code>awk '{ print $0 }' file.txt</code></td><td>打印文件的每一行内容</td></tr><tr><td>$1,$2&mldr;</td><td>第n个字段</td><td><code>awk '{ print $1, $3 }' file.txt</code></td><td>打印每行的第1和第3个字段</td></tr><tr><td>NF</td><td>字段数量</td><td><code>awk '{ print NF, $0 }' file.txt</code></td><td>打印每行的字段数量及内容</td></tr><tr><td>NR</td><td>当前行号</td><td><code>awk '{ print "Line " NR ":", $0 }' file.txt</code></td><td>打印行号和行内容</td></tr><tr><td>FS</td><td>输入字段分隔符</td><td><code>awk 'BEGIN { FS=":" } { print $1 }' /etc/passwd</code></td><td>使用冒号作为分隔符读取passwd文件</td></tr><tr><td>OFS</td><td>输出字段分隔符</td><td><code>awk 'BEGIN { OFS=" -> " } { print $1, $2 }' file.txt</code></td><td>输出字段之间使用 " -> " 分隔</td></tr><tr><td>RS</td><td>记录分隔符</td><td><code>awk 'BEGIN { RS="" } { print $0 }' file.txt</code></td><td>使用空行作为记录分隔符（段落模式）</td></tr></tbody></table><h3 id=模式类型>模式类型</h3><h4 id=正则表达式模式><strong>正则表达式模式</strong></h4><p>在 awk 中，正则表达式模式需要用 <code>/</code> 包裹。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 匹配包含 &#34;error&#34; 的行</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/error/ { print $0 }&#39;</span> log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 匹配以 &#34;root&#34; 开头的行</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/^root/ { print $0 }&#39;</span> /etc/passwd
</span></span></code></pre></div><h4 id=关系表达式模式>关系表达式模式</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 第三列大于 100</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$3 &gt; 100 { print $0 }&#39;</span> data.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 第一列等于 &#34;admin&#34;</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$1 == &#34;admin&#34; { print $0 }&#39;</span> users.txt
</span></span></code></pre></div><h4 id=复合模式>复合模式</h4><p>复合模式是通过逻辑运算符（<code>&&</code>、<code>||</code>、<code>!</code>）组合多个条件来创建更复杂的匹配规则。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 第一列是 &#34;error&#34; 且第四列大于 100</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$1 == &#34;error&#34; &amp;&amp; $4 &gt; 100 { print $0 }&#39;</span> log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 第二列小于 50 或大于 100</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$2 &lt; 50 || $2 &gt; 100 { print $0 }&#39;</span> data.txt
</span></span></code></pre></div><h4 id=特殊模式>特殊模式</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># BEGIN：在处理第一行之前执行</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END：在处理完最后一行后执行</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>BEGIN { print &#34;Start processing&#34; }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      { print $0 }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>END   { print &#34;End processing&#34; }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span> file.txt
</span></span></code></pre></div><h3 id=动作的常见用途>动作的常见用途</h3><h4 id=打印操作>打印操作</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 直接打印整行</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> print $0 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 打印特定字段</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> print $1, $3 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 格式化打印</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> printf <span style=color:#e6db74>&#34;Name: %s, Age: %d\n&#34;</span>, $1, $2 <span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=计算操作>计算操作</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 累加第一列的值</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> sum <span style=color:#f92672>+=</span> $1 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>END <span style=color:#f92672>{</span> print <span style=color:#e6db74>&#34;总和:&#34;</span>, sum <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 计算平均值</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    total <span style=color:#f92672>+=</span> $1
</span></span><span style=display:flex><span>    count++
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>END <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#34;平均值:&#34;</span>, total/count
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=条件处理>条件处理</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 如果第二列大于60，打印&#34;及格&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>$2 &gt; 60<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        print <span style=color:#e6db74>&#34;及格&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        print <span style=color:#e6db74>&#34;不及格&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=使用示例-2>使用示例</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 打印特定列</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $1, $3}&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用自定义分隔符</span>
</span></span><span style=display:flex><span>awk -F: <span style=color:#e6db74>&#39;{print $1}&#39;</span> /etc/passwd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 条件过滤</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;$3 &gt; 100 {print $0}&#39;</span> data.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 计算总和</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{sum += $1} END {print sum}&#39;</span> numbers.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 统计行数</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;END {print NR}&#39;</span> file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 复杂处理示例</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    BEGIN {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        print &#34;开始处理...&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        sum = 0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    $1 &gt; 0 {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        sum += $1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        count++
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    END {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        printf &#34;平均值: %.2f\n&#34;, sum/count
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span> data.txt
</span></span></code></pre></div><h2 id=实用组合示例>实用组合示例</h2><p><code>grep</code>、<code>sed</code>、<code>awk</code>命令经常结合使用，能够实现更强大的文本处理功能：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查找并替换</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;pattern&#34;</span> file.txt | sed <span style=color:#e6db74>&#39;s/old/new/g&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 过滤并统计</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;error&#34;</span> log.txt | awk <span style=color:#e6db74>&#39;{count[$3]++} END {for(i in count) print i, count[i]}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 复杂日志分析</span>
</span></span><span style=display:flex><span>awk <span style=color:#e6db74>&#39;/ERROR/ {print $0}&#39;</span> log.txt | sed <span style=color:#e6db74>&#39;s/ERROR/严重错误/g&#39;</span> | grep <span style=color:#e6db74>&#34;2024&#34;</span>
</span></span></code></pre></div><h2 id=总结>总结</h2><ul><li>grep适合文本搜索和过滤</li><li>sed适合文本替换和编辑</li><li>awk适合复杂的文本处理和数据分析</li></ul><p>这三个命令各有特色，组合使用可以解决绝大多数文本处理需求。</p></section><div class=divider></div><section class=space-y-4><template x-if="['localhost', '127.0.0.1'].indexOf(window.location.hostname) == -1"><article><script src=https://utteranc.es/client.js repo=bestzy6/bestzy6.github.io issue-term=og:title theme=github-light crossorigin=anonymous async></script></article></template></section></article></div><div x-data=tocHighlighter() @scroll.window=debouncedScroll class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#grep---文本搜索利器>grep - 文本搜索利器</a><ul><li><a href=#基本语法>基本语法</a></li><li><a href=#常用选项>常用选项</a></li><li><a href=#使用示例>使用示例</a></li></ul></li><li><a href=#sed---流编辑器>sed - 流编辑器</a><ul><li><a href=#基本语法-1>基本语法</a></li><li><a href=#常用选项-1>常用选项</a></li><li><a href=#常用命令>常用命令</a></li><li><a href=#使用示例-1>使用示例</a></li></ul></li><li><a href=#awk---文本处理编程语言>awk - 文本处理编程语言</a><ul><li><a href=#基本语法-2>基本语法</a></li><li><a href=#常用选项-2>常用选项</a></li><li><a href=#常用内置变量>常用内置变量</a></li><li><a href=#模式类型>模式类型</a></li><li><a href=#动作的常见用途>动作的常见用途</a></li><li><a href=#使用示例-2>使用示例</a></li></ul></li><li><a href=#实用组合示例>实用组合示例</a></li><li><a href=#总结>总结</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 Bestzy's Blog</p><p class=text-sm>🌱
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"><div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column"><article class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"><div class=card-body><div class=card-title>About Me</div><div class="prose dark:prose-invert"><p>👋 Hi, This is Zheng Yi.</p></div></div></article></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 Bestzy's Blog</p><p class=text-sm>🌱
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"zh"}).toFormat("yyyy年MM月dd日")})}</script><script src=/js/toc.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-BR16XEQ6Y4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BR16XEQ6Y4")}</script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>